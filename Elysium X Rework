local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()

local Window = WindUI:CreateWindow({
    Title = "Elysium X Rework",
    Icon = "award",
    Author = "By Atlas",
    Folder = "Elysium X Rework",
    Transparent = true,
    Theme = "Crimson",
    Resizable = true,
    HideSearchBar = false,
    ScrollBarEnabled = true,

    KeySystem = {
        Key = { "260126" },
        Note = "Still under development expect bugs",
    },
})

Window:Tag({
    Title = "Rework In Progress",
    Icon = "book-plus",
    Color = Color3.fromHex("#000080"),
    Radius = 13,
})

Window:EditOpenButton({
    Title = "Open Elysium",
    Icon = "monitor",
    CornerRadius = UDim.new(0,50),
    StrokeThickness = 2,
    Color = ColorSequence.new(
        Color3.fromHex("FF0000"),
        Color3.fromHex("000080")
    ),
    OnlyMobile = false,
    Enabled = true,
    Draggable = true,
})

local MainTab = Window:Tab({ Title = "Main", Icon = "star", Locked = false })
local ElysiumAITab = Window:Tab({ Title = "Elysium AI", Icon = "cpu", Locked = false })

MainTab:Paragraph({
    Title = "Credits",
    Desc = "By Atlas (Solo Developer)",
    Color = "Red",
    Image = "rbxassetid://18631102886",
    ImageSize = 50,
    Locked = false,
    Buttons = {
        {
            Icon = "link",
            Title = "Discord",
            Callback = function()
                setclipboard("https://discord.gg/JEpRMHSkpq")
                WindUI:Notify({
                    Title = "Discord",
                    Content = "Link Copied",
                    Duration = 3,
                    Icon = "external-link",
                })
            end,
        },
        {
            Icon = "link",
            Title = "TikTok",
            Callback = function()
                setclipboard("@mrnexus000")
                WindUI:Notify({
                    Title = "TikTok",
                    Content = "Username Copied",
                    Duration = 3,
                    Icon = "external-link",
                })
            end,
        },
        {
            Icon = "link",
            Title = "YouTube",
            Callback = function()
                setclipboard("@Atlas_Scripts")
                WindUI:Notify({
                    Title = "YouTube",
                    Content = "Username Copied",
                    Duration = 3,
                    Icon = "external-link",
                })
            end,
        },
    }
})

MainTab:Dropdown({
    Title = "Theme",
    Values = { "Rose","Light","MonokaiPro","Plant","Midnight","CottonCandy","Dark","Indigo","Sky","Crimson","Amber","Violet","Red" },
    Value = "Crimson",
    Callback = function(option)
        WindUI:SetTheme(option)
    end
})

MainTab:Toggle({
    Title = "Transparent",
    Icon = "palette",
    Value = true,
    Callback = function(state)
        Window:ToggleTransparency(state)
    end
})

ElysiumAITab:Paragraph({
    Title = "[ CHAT ]",
    Desc = "",
    Color = "Grey",
    Locked = false,
    Buttons = {}
})

ElysiumAITab:Input({
    Title = "API Key",
    Value = "",
    InputIcon = "key",
    Type = "Text",
    Placeholder = "Enter your API Key...",
    Callback = function(key) end
})

ElysiumAITab:Input({
    Title = "Message",
    Value = "",
    InputIcon = "code",
    Type = "Textarea",
    Placeholder = "Enter text...",
    Callback = function(msg) end
})

ElysiumAITab:Button({
    Title = "Send",
    Locked = false,
    Callback = function()
        local apiKey = ElysiumAITab:GetInputValue("API Key") or ""
        local userMessage = ElysiumAITab:GetInputValue("Message") or ""
        if apiKey == "" or userMessage == "" then return end

        local paragraph = ElysiumAITab:GetParagraph("[ CHAT ]")
        paragraph.Desc = paragraph.Desc .. string.format("\n[Player]: %s", userMessage)

        local HttpService = game:GetService("HttpService")
        local url = "https://generativelanguage.googleapis.com/v1beta/models/gemini-3-flash-preview:generateContent"

        local ok, resp = pcall(function()
            return request({
                Url = url,
                Method = "POST",
                Headers = {
                    ["Content-Type"] = "application/json",
                    ["Authorization"] = "Bearer " .. apiKey
                },
                Body = HttpService:JSONEncode({
                    contents = {
                        {role="user", parts={{text=userMessage}}}
                    }
                })
            })
        end)

        local reply = "Error contacting AI"
        if ok and resp and resp.StatusCode == 200 then
            local data = HttpService:JSONDecode(resp.Body)
            if data and data.candidates and #data.candidates > 0 then
                reply = data.candidates[1].content or "No reply"
            end
        end

        paragraph.Desc = paragraph.Desc .. string.format("\n[Elysium AI]: %s", reply)
    end
})
