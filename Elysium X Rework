local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()

local Window = WindUI:CreateWindow({
    Title = "Elysium X Rework",
    Icon = "award",
    Author = "By Atlas",
    Folder = "Elysium X Rework",
    Transparent = true,
    Theme = "Crimson",
    Resizable = true,
    HideSearchBar = false,
    ScrollBarEnabled = true,

    KeySystem = {
        Key = { "260126", "0000" },
        Note = "The key is 260126 or 0000",
    },
})

Window:Tag({
    Title = "Rework In Progress",
    Icon = "book-plus",
    Color = Color3.fromHex("#000080"),
    Radius = 13,
})

Window:EditOpenButton({
    Title = "Open Elysium",
    Icon = "monitor",
    CornerRadius = UDim.new(0,50),
    StrokeThickness = 2,
    Color = ColorSequence.new(
        Color3.fromHex("FF0000"),
        Color3.fromHex("000080")
    ),
    OnlyMobile = false,
    Enabled = true,
    Draggable = true,
})

local MainTab = Window:Tab({ Title = "Main", Icon = "star", Locked = false })
local PlayBreakTab = Window:Tab({ Title = "Play Break", Icon = "sword", Locked = false })

PlayBreakTab:Toggle({
	Title = "ESP Monsters",
	Value = false,
	Callback = function(state)
		local RunService = game:GetService("RunService")
		local Workspace = game:GetService("Workspace")
		local LocalPlayer = game.Players.LocalPlayer
		local LocalChar = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()

		local ESPObjects = {}
		local Conn1
		local Conn2

		local function Clear()
			if Conn1 then Conn1:Disconnect() Conn1 = nil end
			if Conn2 then Conn2:Disconnect() Conn2 = nil end
			for _, h in pairs(ESPObjects) do
				if h then h:Destroy() end
			end
			table.clear(ESPObjects)
		end

		if not state then
			Clear()
			return
		end

		local function Apply(model)
			if model == LocalChar then return end
			if model:IsA("Model")
				and model:FindFirstChild("Attack")
				and not ESPObjects[model] then

				local highlight = Instance.new("Highlight")
				highlight.Adornee = model
				highlight.FillColor = Color3.fromRGB(255, 0, 0)
				highlight.OutlineColor = Color3.fromRGB(255, 0, 0)
				highlight.FillTransparency = 0.5
				highlight.OutlineTransparency = 0
				highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
				highlight.Parent = model

				ESPObjects[model] = highlight
			end
		end

		for _, model in pairs(Workspace:GetChildren()) do
			Apply(model)
		end

		Conn1 = Workspace.ChildAdded:Connect(Apply)

		Conn2 = RunService.RenderStepped:Connect(function()
			if not state then
				Clear()
			end
		end)
	end
})

PlayBreakTab:Toggle({
	Title = "ESP Survivors",
	Value = false,
	Callback = function(state)
		local RunService = game:GetService("RunService")
		local Workspace = game:GetService("Workspace")
		local LocalPlayer = game.Players.LocalPlayer
		local LocalChar = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()

		local ESPObjects = {}
		local Conn1
		local Conn2

		local function Clear()
			if Conn1 then Conn1:Disconnect() Conn1 = nil end
			if Conn2 then Conn2:Disconnect() Conn2 = nil end
			for _, h in pairs(ESPObjects) do
				if h then h:Destroy() end
			end
			table.clear(ESPObjects)
		end

		if not state then
			Clear()
			return
		end

		local function Apply(model)
			if model == LocalChar then return end
			if model:IsA("Model")
				and model:FindFirstChild("PerkScripts")
				and not ESPObjects[model] then

				local highlight = Instance.new("Highlight")
				highlight.Adornee = model
				highlight.FillColor = Color3.fromRGB(0, 255, 0)
				highlight.OutlineColor = Color3.fromRGB(0, 255, 0)
				highlight.FillTransparency = 0.5
				highlight.OutlineTransparency = 0
				highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
				highlight.Parent = model

				ESPObjects[model] = highlight
			end
		end

		for _, model in pairs(Workspace:GetChildren()) do
			Apply(model)
		end

		Conn1 = Workspace.ChildAdded:Connect(Apply)

		Conn2 = RunService.RenderStepped:Connect(function()
			if not state then
				Clear()
			end
		end)
	end
})

PlayBreakTab:Toggle({
	Title = "No Roll Cooldown",
	Value = false,
	Callback = function(state)
		local UIS = game:GetService("UserInputService")
		local Player = game.Players.LocalPlayer

		local RollConn1
		local RollConn2

		if not state then
			if RollConn1 then RollConn1:Disconnect() RollConn1 = nil end
			if RollConn2 then RollConn2:Disconnect() RollConn2 = nil end
			return
		end

		local COOLDOWN_TIME = 0

		local Char = Player.Character or Player.CharacterAdded:Wait()
		local Humanoid = Char:WaitForChild("Humanoid")

		local Animation = Instance.new("Animation")
		Animation.AnimationId = "rbxassetid://13912440911"

		local BaseSpeeds = Char:WaitForChild("MovementV2"):WaitForChild("Walkspeeds"):WaitForChild("BaseSpeeds")
		local WalkSpeed = BaseSpeeds:WaitForChild("WalkSpeed")
		local SprintSpeed = BaseSpeeds:WaitForChild("SprintSpeed")
		local CrouchSpeed = BaseSpeeds:WaitForChild("CrouchSpeed")

		local DefaultWalk = WalkSpeed.Value
		local DefaultSprint = SprintSpeed.Value
		local DefaultCrouch = CrouchSpeed.Value

		local LastRoll = 0

		local function Roll()
			if Humanoid.Health >= 999 then return end
			if Humanoid.MoveDirection.Magnitude <= 0 then return end
			if Humanoid.FloorMaterial == Enum.Material.Air then return end
			if Char.Grabpack.Server.HoldingToyPart.Value then return end
			if workspace.Game.Values.TimeLeft.Value <= 0 then return end
			if COOLDOWN_TIME > 0 and os.clock() - LastRoll < COOLDOWN_TIME then return end

			LastRoll = os.clock()

			if Char:FindFirstChild("Rolled") then
				Char.Rolled:Fire()
			end
			if Char:FindFirstChild("Remote") then
				Char.Remote:FireServer()
			end

			Humanoid:LoadAnimation(Animation):Play()

			if Char:FindFirstChild("PerkScripts")
				and Char.PerkScripts:FindFirstChild("Redline")
				and Char.PerkScripts.Redline.Activity.Active.Value then

				WalkSpeed.Value += math.abs(WalkSpeed.Value - 30) - 4
				SprintSpeed.Value += math.abs(SprintSpeed.Value - 30) - 4
				CrouchSpeed.Value += math.abs(CrouchSpeed.Value - 30) - 4
			else
				WalkSpeed.Value += math.abs(WalkSpeed.Value - 30)
				SprintSpeed.Value += math.abs(SprintSpeed.Value - 30)
				CrouchSpeed.Value += math.abs(CrouchSpeed.Value - 30)
			end

			task.delay(0.6, function()
				WalkSpeed.Value = DefaultWalk
				SprintSpeed.Value = DefaultSprint
				CrouchSpeed.Value = DefaultCrouch
				Instance.new("NumberValue", Char.MovementV2.Walkspeeds.SpeedOffsets):Destroy()
			end)
		end

		local RollBind = Player.PlayerData.Stats.config.rollbind

		RollConn1 = UIS.InputBegan:Connect(function(input, gp)
			if gp then return end
			if input.KeyCode == Enum.KeyCode:FromName(RollBind.Value)
				or input.KeyCode == Enum.KeyCode.ButtonB
				or input.KeyCode == Enum.KeyCode.ButtonR1 then
				Roll()
			end
		end)

		RollConn2 = Player.PlayerGui
			:WaitForChild("GameUI")
			:WaitForChild("MobileControls")
			:WaitForChild("Roll")
			.Activated:Connect(Roll)
	end
})
