local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()

local Window = WindUI:CreateWindow({
    Title = "Elysium X Rework",
    Icon = "award",
    Author = "By Atlas",
    Folder = "Elysium X Rework",
    Transparent = true,
    Theme = "Crimson",
    Resizable = true,
    HideSearchBar = false,
    ScrollBarEnabled = true,

    KeySystem = {
        Key = { "260126", "0000" },
        Note = "The key is 260126 or 0000",
    },
})

Window:Tag({
    Title = "Rework In Progress",
    Icon = "book-plus",
    Color = Color3.fromHex("#000080"),
    Radius = 13,
})

Window:EditOpenButton({
    Title = "Open Elysium",
    Icon = "monitor",
    CornerRadius = UDim.new(0,50),
    StrokeThickness = 2,
    Color = ColorSequence.new(
        Color3.fromHex("FF0000"),
        Color3.fromHex("000080")
    ),
    OnlyMobile = false,
    Enabled = true,
    Draggable = true,
})

local MainTab = Window:Tab({ Title = "Main", Icon = "star", Locked = false })
local PlayBreakTab = Window:Tab({ Title = "Play Break", Icon = "sword", Locked = false })

PlayBreakTab:Toggle({
	Title = "ESP Monsters",
	Value = false,
	Callback = function(state)
		local RunService = game:GetService("RunService")
		local Workspace = game:GetService("Workspace")

		local ESPObjects = {}
		local Conn1
		local Conn2

		local function Clear()
			if Conn1 then Conn1:Disconnect() Conn1 = nil end
			if Conn2 then Conn2:Disconnect() Conn2 = nil end
			for _, h in pairs(ESPObjects) do
				if h then h:Destroy() end
			end
			table.clear(ESPObjects)
		end

		if not state then
			Clear()
			return
		end

		local function Apply(model)
			if model:IsA("Model") and model:FindFirstChild("Attack") and not ESPObjects[model] then
				local highlight = Instance.new("Highlight")
				highlight.Adornee = model
				highlight.FillColor = Color3.fromRGB(255, 0, 0)
				highlight.OutlineColor = Color3.fromRGB(255, 0, 0)
				highlight.FillTransparency = 0.5
				highlight.OutlineTransparency = 0
				highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
				highlight.Parent = model
				ESPObjects[model] = highlight
			end
		end

		for _, model in pairs(Workspace:GetChildren()) do
			Apply(model)
		end

		Conn1 = Workspace.ChildAdded:Connect(Apply)

		Conn2 = RunService.RenderStepped:Connect(function()
			if not state then
				Clear()
			end
		end)
	end
})

PlayBreakTab:Toggle({
	Title = "ESP Survivors",
	Value = false,
	Callback = function(state)
		local RunService = game:GetService("RunService")
		local Workspace = game:GetService("Workspace")

		local ESPObjects = {}
		local Conn1
		local Conn2

		local function Clear()
			if Conn1 then Conn1:Disconnect() Conn1 = nil end
			if Conn2 then Conn2:Disconnect() Conn2 = nil end
			for _, h in pairs(ESPObjects) do
				if h then h:Destroy() end
			end
			table.clear(ESPObjects)
		end

		if not state then
			Clear()
			return
		end

		local function Apply(model)
			if model:IsA("Model") and model:FindFirstChild("PerkScripts") and not ESPObjects[model] then
				local highlight = Instance.new("Highlight")
				highlight.Adornee = model
				highlight.FillColor = Color3.fromRGB(0, 255, 0)
				highlight.OutlineColor = Color3.fromRGB(0, 255, 0)
				highlight.FillTransparency = 0.5
				highlight.OutlineTransparency = 0
				highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
				highlight.Parent = model
				ESPObjects[model] = highlight
			end
		end

		for _, model in pairs(Workspace:GetChildren()) do
			Apply(model)
		end

		Conn1 = Workspace.ChildAdded:Connect(Apply)

		Conn2 = RunService.RenderStepped:Connect(function()
			if not state then
				Clear()
			end
		end)
	end
})
