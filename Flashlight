local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
local playerGui = player:WaitForChild("PlayerGui")

local screenGui = Instance.new("ScreenGui")
screenGui.Parent = playerGui

local batteryLevel = 100

local function updateBattery()
    batteryLabel.Text = batteryLevel.."%"
end

local main = Instance.new("Frame")
main.Size = UDim2.new(0,200,0,80)
main.Position = UDim2.new(0,20,0,20)
main.BackgroundTransparency = 1
main.Parent = screenGui

local batteryLabel = Instance.new("TextLabel")
batteryLabel.Size = UDim2.new(0,200,0,30)
batteryLabel.Position = UDim2.new(0,0,0,0)
batteryLabel.BackgroundTransparency = 1
batteryLabel.TextColor3 = Color3.new(1,1,1)
batteryLabel.TextSize = 20
batteryLabel.Text = batteryLevel.."%"
batteryLabel.Font = Enum.Font.Custom
batteryLabel.TextScaled = true
batteryLabel.TextStrokeTransparency = 0
batteryLabel.TextXAlignment = Enum.TextXAlignment.Left
batteryLabel.Parent = main
local fontId = 12187360881
pcall(function() batteryLabel.FontFace = Font.fromId(fontId) end)

local recoverButton = Instance.new("ImageButton")
recoverButton.Size = UDim2.new(0,50,0,50)
recoverButton.Position = UDim2.new(0,0,0,40)
recoverButton.Image = "rbxassetid://12444519928"
recoverButton.BackgroundTransparency = 1
recoverButton.Parent = main

recoverButton.MouseButton1Click:Connect(function()
    batteryLevel = math.min(batteryLevel + 5, 100)
    updateBattery()
    recoverButton:TweenSize(UDim2.new(0,55,0,55), "Out", "Bounce", 0.1, true, function()
        recoverButton:TweenSize(UDim2.new(0,50,0,50), "Out", "Bounce", 0.1, true)
    end)
end)

local flashlightButton = Instance.new("ImageButton")
flashlightButton.Size = UDim2.new(0,50,0,50)
flashlightButton.Position = UDim2.new(0,150,0,40)
flashlightButton.Image = "rbxassetid://108860650354064"
flashlightButton.BackgroundTransparency = 1
flashlightButton.Parent = main

local flashlightOn = false
local flashlight = Instance.new("SpotLight")
flashlight.Enabled = false
flashlight.Range = 20
flashlight.Brightness = 2
flashlight.Angle = 60
flashlight.Parent = humanoidRootPart

flashlightButton.MouseButton1Click:Connect(function()
    flashlightOn = not flashlightOn
    flashlight.Enabled = flashlightOn
    if flashlightOn then
        flashlightButton.Image = "rbxassetid://135873273752805"
    else
        flashlightButton.Image = "rbxassetid://108860650354064"
    end
    flashlightButton:TweenSize(UDim2.new(0,55,0,55), "Out", "Bounce", 0.1, true, function()
        flashlightButton:TweenSize(UDim2.new(0,50,0,50), "Out", "Bounce", 0.1, true)
    end)
end)

game:GetService("RunService").RenderStepped:Connect(function()
    if flashlightOn then
        local camera = workspace.CurrentCamera
        flashlight.CFrame = CFrame.new(humanoidRootPart.Position, humanoidRootPart.Position + camera.CFrame.LookVector)
    end
end)

updateBattery()
